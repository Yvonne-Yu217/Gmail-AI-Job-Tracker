# Job Application Tracker

An enhanced job application tracking system that automatically extracts and analyzes job application data from Gmail using AI.

## Based On

This project is based on [zichengalexzhao/job-app-tracker](https://github.com/zichengalexzhao/job-app-tracker) with significant improvements:
Attribution: the original idea and foundation come from the repository above. This project focuses on practical enhancements and operational tweaks, with clear credit and link back.

## Changes Summary
- Enhanced email classification, especially for nuanced declines
- Flexible model support (default cost‑efficient model, configurable by user)
- Real-time pipeline output with per-step summaries
- Progress bar in email processing for visibility
- Simplified visuals (status distribution chart)
- Safer defaults and .gitignore for credentials/data

## Quick Setup

### Prerequisites
- Python 3.9+
- Gmail account
- OpenAI API key

### Installation
```bash
git clone https://github.com/yourusername/job-app-tracker.git
cd job-app-tracker
pip install -r requirements.txt
```

### Configuration
1. **Gmail API Setup (OAuth)**
   - 打开 [Google Cloud Console](https://console.cloud.google.com/) 并登录
   - 创建项目：顶部项目选择器 → New Project → 命名后创建
   - 启用 API：`APIs & Services` → `Library` → 搜索并启用 `Gmail API`
   - 配置 OAuth 同意屏幕：`APIs & Services` → `OAuth consent screen`
     - User Type 选择 `External`（个人使用即可）
     - 基本信息随意填写（App name、User support email）
     - Scopes：可保持默认（本项目只使用基础只读范围）
     - Test users：添加你的 Gmail 账户
     - 保存并发布到测试状态（无需“上线”）
   - 创建凭据：`Credentials` → `Create Credentials` → `OAuth client ID`
     - Application type 选择 `Desktop app`
     - 创建后点击下载 JSON，保存为：`config/gmail_credentials.json`
   - 首次运行授权说明：
     - 运行程序时会弹出浏览器要求授权 → 选择你的账号并同意
     - 授权后会在本地生成 `config/token.json`，下次运行将自动复用
     - 如果授权异常或要更换账号，可删除 `config/token.json` 重新授权

2. **OpenAI API**
   - 申请/查看你的 OpenAI API Key，并在本地创建 `.env`：
     ```bash
     mkdir -p config
     cat > config/.env << 'EOF'
     OPENAI_API_KEY=your-openai-key
     # 可选：自定义模型与网关（如使用代理或不同模型）
     # OPENAI_MODEL=gpt-4o-mini
     # OPENAI_BASE=https://api.openai.com/v1
     EOF
     ```
   - 注意：不要把 `config/.env`、`config/token.json`、`config/gmail_credentials.json` 提交到 Git（已在 `.gitignore` 处理）

## Usage

### Complete Pipeline (Recommended)
```bash
python job-app-tracker/pipeline.py
```
This runs everything: data reset → email extraction → deduplication → export → statistics → visualization

### Individual Components
```bash
# Extract emails only (all emails)
python job-app-tracker/main.py

# Extract emails from specific date range
python job-app-tracker/main.py --since 2024-01-01 --until 2024-12-31

# Extract emails from last N days
python job-app-tracker/main.py --days 30

# Extract with limit
python job-app-tracker/main.py --limit 100

# Clean duplicates
python job-app-tracker/clean_duplicates.py

# Generate stats
python job-app-tracker/generate_stats.py

# Export to CSV
python job-app-tracker/print_table.py --output data/applications.csv
```

## Output Files
- `data/job_applications.json` - Clean job application data
- `data/job_applications.csv` - CSV export
- `data/processed_ids.json` - Processed email IDs tracking
- `visualizations/status_distribution.html` - Status distribution pie chart

## Features
- Smart email filtering (excludes job alerts, includes applications/interviews/offers/rejections)
- AI-powered extraction of company, position, status, location, date
- Automatic duplicate detection and merging
- Cost-efficient OpenAI usage
- Interactive HTML visualizations

## Troubleshooting
- **Gmail auth issues**: Delete `config/token.json` to re-authenticate
- **OpenAI errors**: Check API key in `config/.env` and account credits
- **No emails found**: Ensure you have job-related emails in Gmail inbox

## License
MIT License - see [LICENSE](LICENSE) file.
